"use strict";function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,r=new Array(e);o<e;o++)r[o]=t[o];return r}function _iterableToArrayLimit(t,e){var o=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=o){var r,i,a=[],l=!0,c=!1;try{for(o=o.call(t);!(l=(r=o.next()).done)&&(a.push(r.value),!e||a.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{l||null==o.return||o.return()}finally{if(c)throw i}}return a}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _defineProperty(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}!function(t,e){var o,r="--dxpr-color-",i="--dxpr-setting-";e.behaviors.dxpr_themeSettingsColors={elColorPalette:document.querySelector("#color-palette"),elSchemeSelect:document.getElementById("edit-color-scheme"),colorSettings:null!==(o=drupalSettings.dxpr_themeSettings.colors)&&void 0!==o?o:[],attach:function(t){once("dxpr-color-init","html").length&&this.init()},init:function(){var t=this,e=this.elColorPalette,o=new ReinventedColorWheel({appendTo:document.getElementById("color-picker-placeholder"),hex:e.querySelector(".form-text").value,wheelDiameter:190,wheelReflectsSaturation:!1,onChange:function(o){var r=e.querySelector(".form-text.active");r&&t.updateColorField(r,o.hex)}});if(o.onChange(o),e){var r=e.querySelectorAll(".form-text"),i={init:function(e){"Backspace"!==e.key&&8!==e.keyCode&&(t.setActiveField(e.target),o.hex=e.target.value)}};r.forEach((function(t){t.addEventListener("focus",i.init),t.addEventListener("change",i.init),t.addEventListener("keyup",i.init)}))}this.elSchemeSelect.addEventListener("change",(function(e){var o=e.target.value;t.populateColorFields(o),t.setActiveField(null),"current"===o&&(o="custom"),e.target.value=o})),this.populateColorFields("current")},setActiveField:function(t){this.elColorPalette.querySelectorAll(".form-text").forEach((function(t){t.classList.remove("active")})),t&&t.classList.add("active")},populateColorFields:function(t){var e=this;if("custom"!==t&&this.colorSettings){var o="current"===t?this.colorSettings.palette:this.colorSettings.schemes[t].colors;o&&(Object.keys(o).forEach((function(t){var r=o[t],i=document.getElementById("edit-color-palette-".concat(t));e.updateColorField(i,r,!0)})),this.setDocumentPalette(o))}},updateColorField:function(t,e,o){if(t)if(t.classList.contains("error"))t.classList.remove("error");else if(t.value=e,t.style.background=e,t.style.color=e?this.getContrastColor(e):"",o)t.dataset.original=e;else{"custom"!==this.elSchemeSelect.value&&e!==t.dataset.original&&(this.elSchemeSelect.value="custom");var r=_defineProperty({},t.id.replace("edit-color-palette-",""),e);this.setDocumentPalette(r)}},setDocumentPalette:function(t){var e=this,o=document.documentElement;if(t&&Object.keys(t).forEach((function(i){if(o.style.setProperty(r+i,String(t[i])),"header"===i){var a=_slicedToArray(e.getHexToRgb(t[i]),3),l=a[0],c=a[1],n=a[2];o.style.setProperty("".concat(r).concat(i,"-rgb"),"".concat(l,",").concat(c,",").concat(n))}})),null===t)for(var i=o.style.length-1;i>=0;i--){var a=o.style[i];a.startsWith(r)&&o.style.removeProperty(a)}},getContrastColor:function(t){var e=_slicedToArray(this.getHexToRgb(t),3);return.299*e[0]+.587*e[1]+.114*e[2]>128?"#000":"#fff"},getHexToRgb:function(t){return 4===t.length&&(t="#".concat(t.slice(1).split("").map((function(t){return t+t})).join(""))),[parseInt(t.slice(1,3),16),parseInt(t.slice(3,5),16),parseInt(t.slice(5,7),16)]}},e.behaviors.dxpr_themeSettingsDynamic={attach:function(t){once("dxpr-settings-init","html").length&&this.init()},init:function(){var e=this,o=this.getCssVariables();this.toggleElement("page_title_breadcrumbs","header ol.breadcrumb"),Object.keys(o).forEach((function(o){var r=e.getInputId(o);document.querySelectorAll('[name="'.concat(r,'"]')).forEach((function(o){t(o).on("change",(function(t){e.fieldHandler(t)}))}))}))},getInputId:function(t){var e=t.replace(i,"").replace(/-/g,"_"),o=_slicedToArray("",3),r=o[0],a=o[1],l=o[2];switch(e){case"title_type_italic":case"title_type_bold":case"title_type_uppercase":var c=_slicedToArray(e.split("_"),3);r=c[0],a=c[1],l=c[2],e="".concat(r,"_").concat(a,"[").concat(l,"]")}return e},fieldHandler:function(t){var e=document.documentElement,o=t.target,r=o.name,a=o.parentElement.textContent,l=t.target.value;"checkbox"===t.target.type&&(l=t.target.checked),a.startsWith(l)&&(l=a),l=this.massageValue(r,l),e.style.setProperty(i+r.replace(/\[|_/g,"-").replace("]",""),String(l))},massageValue:function(t,e){switch(t){case"page_title_breadcrumbs_separator":e='"'.concat(e,'"');break;case"title_sticker":e="1"===e?"inline-block":"block";break;case"headings_uppercase":case"title_type[uppercase]":e=e?"uppercase":"normal";break;case"headings_bold":case"title_type[bold]":e=e?"bold":"normal";break;case"title_type[italic]":e=e?"italic":"normal";break;case"divider_length":e="0px"===e?"100%":e;break;case"divider_position":switch(e){case"1":e="0";break;case"2":e="auto";break;case"3":e="calc(100% - var(--dxpr-setting-divider-length))"}}return e},getCssVariables:function(){for(var t=window.getComputedStyle(document.documentElement),e={},o=0;o<t.length;o++){var r=t[o];r.startsWith(i)&&(e[r]=t.getPropertyValue(r))}return e},toggleElement:function(t,e){var o=document.querySelector('input[name="'.concat(t,'"]')),r=document.querySelector(e);r.style.display=o.checked?"block":"none",o.addEventListener("change",(function(){r.style.display=o.checked?"block":"none"}))}},e.behaviors.dxpr_themeSettingsControls={attach:function(o){t("#system-theme-settings h2 > small").addClass("form-header");var i="";function a(t){return t in drupalSettings.dxpr_themeSettings.colors.palette&&(t="var(".concat(r+t,")")),t}t("#system-theme-settings .form-type-radio .control-label").not(".dxpr_themeProcessed").each((function(){t(this).addClass("dxpr_themeProcessed"),i=t(this).find("input").remove(),t(this).wrapInner('<span class="dxpr-theme-label">').prepend(i)}));var l=t("#edit-header-top-bg-opacity-scroll, #edit-header-top-bg-opacity, #edit-header-side-bg-opacity, #edit-side-header-background-opacity,#edit-page-title-image-opacity,#edit-header-top-opacity,#edit-header-top-opacity-scroll,#edit-menu-full-screen-opacity"),c=1;l.each((function(){c=t(this).val(),t(this).bootstrapSlider({step:.01,min:0,max:1,tooltip:"show",value:parseFloat(c)})}));var n=t(".line-height-slider");c=1;n.each((function(){c=t(this).val(),t(this).bootstrapSlider({step:.1,min:0,max:3,tooltip:"show",formatter:function(t){return"".concat(t,"em")},value:parseFloat(c)})}));n=t(".border-size-slider"),c=1;n.each((function(){c=t(this).val(),t(this).bootstrapSlider({step:1,min:0,max:30,tooltip:"show",formatter:function(t){return"".concat(t,"px")},value:parseFloat(c)})}));n=t(".border-radius-slider"),c=1;n.each((function(){c=t(this).val(),t(this).bootstrapSlider({step:1,min:0,max:100,tooltip:"show",formatter:function(t){return"".concat(t,"px")},value:parseFloat(c)})})),(i=t("#edit-body-font-size")).bootstrapSlider({step:1,min:8,max:30,tooltip:"show",formatter:function(t){return"".concat(t,"px")},value:parseFloat(i.val())}),(i=t("#edit-nav-font-size")).bootstrapSlider({step:1,min:8,max:30,tooltip:"show",formatter:function(t){return"".concat(t,"px")},value:parseFloat(i.val())}),(i=t("#edit-body-mobile-font-size")).bootstrapSlider({step:1,min:8,max:30,tooltip:"show",formatter:function(t){return"".concat(t,"px")},value:parseFloat(i.val())}),(i=t("#edit-nav-mobile-font-size")).bootstrapSlider({step:1,min:8,max:30,tooltip:"show",formatter:function(t){return"".concat(t,"px")},value:parseFloat(i.val())});var s=t(".font-size-slider");c=1;s.each((function(){c=t(this).val(),t(this).bootstrapSlider({step:1,min:8,max:100,tooltip:"show",formatter:function(t){return"".concat(t,"px")},value:parseFloat(c)})})),(i=t("#edit-scale-factor")).bootstrapSlider({step:.01,min:1,max:2,tooltip:"show",value:parseFloat(i.val())}),(i=t("#edit-divider-thickness")).bootstrapSlider({step:1,min:0,max:20,tooltip:"show",formatter:function(t){return"".concat(t,"px")},value:parseFloat(i.val())}),(i=t("#edit-block-divider-thickness")).bootstrapSlider({step:1,min:0,max:20,tooltip:"show",formatter:function(t){return"".concat(t,"px")},value:parseFloat(i.val())}),(i=t("#edit-divider-length")).bootstrapSlider({step:10,min:0,max:500,tooltip:"show",formatter:function(t){return"".concat(t,"px")},value:parseFloat(i.val())}),(i=t("#edit-block-divider-length")).bootstrapSlider({step:10,min:0,max:500,tooltip:"show",formatter:function(t){return"".concat(t,"px")},value:parseFloat(i.val())}),(i=t("#edit-divider-position")).bootstrapSlider({step:1,min:1,max:3,selection:"none",tooltip:"show",formatter:function(t){var o=e.t("Left");return 2==t&&(o=e.t("Center")),3==t&&(o=e.t("Right")),o},value:parseFloat(i.val())}),(i=t("#edit-headings-letter-spacing")).bootstrapSlider({step:.01,min:-.1,max:.3,tooltip:"show",formatter:function(t){return"".concat(t,"em")},value:parseFloat(i.val())}),(i=t("#edit-block-divider-spacing")).bootstrapSlider({step:1,min:0,max:100,tooltip:"show",formatter:function(t){return"".concat(t,"px")},value:parseFloat(i.val())}),(i=t("#edit-page-title-height")).bootstrapSlider({step:5,min:50,max:500,tooltip:"show",formatter:function(t){return"".concat(t,"px")},value:parseFloat(i.val())}),(i=t("#edit-header-top-height")).bootstrapSlider({step:1,min:10,max:200,tooltip:"show",formatter:function(t){return"".concat(t,"px")},value:parseFloat(i.val())}),(i=t("#edit-header-mobile-breakpoint")).bootstrapSlider({step:10,min:480,max:4100,tooltip:"show",formatter:function(t){return"".concat(t,"px")},value:parseFloat(i.val())}),(i=t("#edit-header-mobile-height")).bootstrapSlider({step:1,min:10,max:200,tooltip:"show",formatter:function(t){return"".concat(t,"px")},value:parseFloat(i.val())}),(i=t("#edit-header-top-height-scroll")).bootstrapSlider({step:1,min:10,max:200,tooltip:"show",formatter:function(t){return"".concat(t,"px")},value:parseFloat(i.val())}),(i=t("#edit-header-top-height-sticky-offset")).bootstrapSlider({step:10,min:0,max:2096,tooltip:"show",formatter:function(t){return"".concat(t,"px")},value:parseFloat(i.val())}),(i=t("#edit-header-side-width")).bootstrapSlider({step:5,min:50,max:500,tooltip:"show",formatter:function(t){return"".concat(t,"px")},value:parseFloat(i.val())}),(i=t("#edit-dropdown-width")).bootstrapSlider({step:5,min:100,max:400,tooltip:"show",formatter:function(t){return"".concat(t,"px")},value:parseFloat(i.val())}),(i=t("#edit-menu-border-size")).bootstrapSlider({step:1,min:1,max:20,tooltip:"show",formatter:function(t){return"".concat(t,"px")},value:parseFloat(i.val())}),(i=t("#edit-menu-border-position-offset")).bootstrapSlider({step:1,min:0,max:100,tooltip:"show",formatter:function(t){return"".concat(t,"px")},value:parseFloat(i.val())}),(i=t("#edit-menu-border-position-offset-sticky")).bootstrapSlider({step:1,min:0,max:100,tooltip:"show",formatter:function(t){return"".concat(t,"px")},value:parseFloat(i.val())}),(i=t("#edit-layout-max-width")).bootstrapSlider({step:10,min:480,max:4100,tooltip:"show",formatter:function(t){return"".concat(t,"px")},value:parseFloat(i.val())}),(i=t("#edit-box-max-width")).bootstrapSlider({step:10,min:480,max:4100,tooltip:"show",formatter:function(t){return"".concat(t,"px")},value:parseFloat(i.val())}),(i=t("#edit-gutter-horizontal")).bootstrapSlider({step:1,min:0,max:100,tooltip:"show",formatter:function(t){return"".concat(t,"px")},value:parseFloat(i.val())}),(i=t("#edit-gutter-vertical")).bootstrapSlider({step:1,min:0,max:100,tooltip:"show",formatter:function(t){return"".concat(t,"px")},value:parseFloat(i.val())}),(i=t("#edit-gutter-container")).bootstrapSlider({step:1,min:0,max:500,tooltip:"show",formatter:function(t){return"".concat(t,"px")},value:parseFloat(i.val())}),(i=t("#edit-gutter-horizontal-mobile")).bootstrapSlider({step:1,min:0,max:100,tooltip:"show",formatter:function(t){return"".concat(t,"px")},value:parseFloat(i.val())}),(i=t("#edit-gutter-vertical-mobile")).bootstrapSlider({step:1,min:0,max:100,tooltip:"show",formatter:function(t){return"".concat(t,"px")},value:parseFloat(i.val())}),(i=t("#edit-gutter-container-mobile")).bootstrapSlider({step:1,min:0,max:500,tooltip:"show",formatter:function(t){return"".concat(t,"px")},value:parseFloat(i.val())}),t(".vertical-tab-button a").click((function(){t(".slider + input").bootstrapSlider("relayout")})),t('input[type="radio"]').change((function(){t(".slider + input").bootstrapSlider("relayout")}));var d=14,p=1.25;t("#edit-scale-factor").change((function(){d=t("#edit-body-font-size").val(),p=t(this).bootstrapSlider("getValue"),t("#edit-h1-font-size, #edit-h1-mobile-font-size").bootstrapSlider("setValue",d*Math.pow(p,4)).change(),t("#edit-h2-font-size, #edit-h2-mobile-font-size").bootstrapSlider("setValue",d*Math.pow(p,3)).change(),t("#edit-h3-font-size, #edit-h3-mobile-font-size").bootstrapSlider("setValue",d*Math.pow(p,2)).change(),t("#edit-h4-font-size, #edit-h4-mobile-font-size, #edit-blockquote-font-size, #edit-blockquote-mobile-font-size").bootstrapSlider("setValue",d*p).change()}));var u="";t("#edit-block-preset").bind("keyup change",(function(){switch(t("#edit-block-advanced .slider + .form-text").bootstrapSlider("setValue",0),t("#edit-block-divider-thickness").bootstrapSlider("setValue",parseInt(t("#edit-divider-thickness").val())),t("#edit-block-divider-length").bootstrapSlider("setValue",parseInt(t("#edit-divider-length").val())),t("#edit-block-divider-spacing").bootstrapSlider("setValue",10),t("#edit-block-background-custom, #edit-title-background-custom, #edit-block-divider-color-custom").val(""),t("#edit-block-advanced select").val(""),t("#edit-title-align-left").prop("checked",!0),t("#edit-title-font-size-h2").prop("checked",!0),u=t(this).val()){case"block_boxed":t("#edit-block-padding").bootstrapSlider("setValue",15),t("#edit-block-border").bootstrapSlider("setValue",5),t("#edit-block-border-color").val("text");break;case"block_outline":t("#edit-block-padding").bootstrapSlider("setValue",15),t("#edit-block-border").bootstrapSlider("setValue",1),t("#edit-block-border-color").val("text");break;case"block_card":t("#edit-block-card").val("card card-body"),t("#edit-title-font-size-h3").prop("checked",!0);break;case"title_inverted":t("#edit-title-background").val("text"),t("#edit-title-card").val("card card-body dxpr-theme-util-background-gray"),t("#edit-title-padding").bootstrapSlider("setValue",10),t("#edit-title-font-size-h3").prop("checked",!0);break;case"title_inverted_shape":t("#edit-title-background").val("text"),t("#edit-title-card").val("card card-body dxpr-theme-util-background-gray"),t("#edit-title-padding").bootstrapSlider("setValue",10),t("#edit-title-border-radius").bootstrapSlider("setValue",100),t("#edit-title-font-size-h4").prop("checked",!0),t("#edit-title-align-center").prop("checked",!0);break;case"title_sticker":t("#edit-title-card").val("card card-body dxpr-theme-util-background-gray"),t("#edit-title-padding").bootstrapSlider("setValue",10),t("#edit-title-font-size-body").prop("checked",!0);break;case"title_sticker_color":t("#edit-title-font-size-body").prop("checked",!0),t("#edit-title-padding").bootstrapSlider("setValue",10),t("#edit-title-card").val("card card-body bg-primary");break;case"title_outline":t("#edit-title-padding").bootstrapSlider("setValue",15),t("#edit-title-border").bootstrapSlider("setValue",1),t("#edit-title-border-color").val("text"),t("#edit-title-font-size-h4").prop("checked",!0);break;case"hairline_divider":t("#edit-block-divider-thickness").bootstrapSlider("setValue",1)}t("#edit-block-advanced input, #edit-block-advanced select").trigger("change"),0==t("#edit-block-padding").val()&&t("#edit-block .block").css("padding",""),0==t("#edit-title-padding").val()&&t("#edit-block .block-title").css("padding",""),t(this).val(u)}));var b=document.querySelector("#edit-divider-color"),h=document.querySelector("#edit-divider-color-custom"),v=document.querySelector(".type-preview hr");b.addEventListener("change",(function(){v.style.borderTopColor=a(b.value)})),h.addEventListener("keyup change",(function(){v.style.borderTopColor=h.value}));var m="";t("#edit-block-advanced").bind("keyup change",(function(){t("#edit-block-preset").val("custom")})),t("#edit-block-card").change((function(){t(".block-preview .block").removeClass("card card-body bg-primary dxpr-theme-util-background-accent1 dxpr-theme-util-background-accent2 dxpr-theme-util-background-black dxpr-theme-util-background-white dxpr-theme-util-background-gray"),t(".block-preview .block").addClass(t(this).val())})),t("#edit-block-background").change((function(){t(".block-preview .block").css("background-color",a(t(this).val()))})),t("#edit-block-background-custom").change((function(){t(".block-preview .block").css("background-color",t(this).val())})),t("#edit-block-padding").bind("keyup change",(function(){t(".block-preview .block").css("padding","".concat(t(this).bootstrapSlider("getValue"),"px"))})),t("#edit-block-border").change((function(){t(".block-preview .block").css("border-width","".concat(t(this).bootstrapSlider("getValue"),"px")),t(this).bootstrapSlider("getValue")>0&&t(".block-preview .block").css("border-style","solid")})),t("#edit-block-border-color").change((function(){t(".block-preview .block").css("border-color",a(t(this).val()))})),t("#edit-block-border-color-custom").bind("keyup change",(function(){t(".block-preview .block").css("border-color",t(this).val())})),t("#edit-block-border-radius").change((function(){t(".block-preview .block").css("border-radius","".concat(t(this).bootstrapSlider("getValue"),"px"))})),t("#edit-title-card").change((function(){t(".block-preview .block-title").removeClass("card card-body bg-primary dxpr-theme-util-background-accent1 dxpr-theme-util-background-accent2 dxpr-theme-util-background-black dxpr-theme-util-background-white dxpr-theme-util-background-gray"),t(".block-preview .block-title").addClass(t(this).val())})),t("#edit-title-font-size").change((function(){m=t(this).find(":checked").val(),m="#edit-".concat(m,"-font-size"),m=t(m).val(),t(".block-preview .block-title").css("font-size","".concat(m,"px"))})),t("#edit-title-align").change((function(){t(".block-preview .block-title").css("text-align",t(this).find(":checked").val())})),t("#edit-title-background").change((function(){t(".block-preview .block-title").css("background-color",a(t(this).val()))})),t("#edit-title-background-custom").bind("keyup change",(function(){t(".block-preview .block-title").css("background-color",t(this).val())})),t("#edit-title-sticker").click((function(){1==t(this).prop("checked")?t(".block-preview .block-title").css("display","inline-block"):t(".block-preview .block-title").css("display","block")})),t("#edit-title-padding").change((function(){t(".block-preview .block-title").css("padding","".concat(t(this).bootstrapSlider("getValue"),"px"))})),t("#edit-title-border").change((function(){t(".block-preview .block-title").css("border-width","".concat(t(this).bootstrapSlider("getValue"),"px")),t(this).bootstrapSlider("getValue")>0&&t(".block-preview .block-title").css("border-style","solid")})),t("#edit-title-border-radius").change((function(){t(".block-preview .block-title").css("border-radius","".concat(t(this).bootstrapSlider("getValue"),"px"))})),t("#edit-title-border-color").change((function(){t(".block-preview .block-title").css("border-color",a(t(this).val()))})),t("#edit-title-border-color-custom").bind("keyup change",(function(){t(".block-preview .block-title").css("border-color",t(this).val())})),0==t("#edit-block-divider:checked").length&&t(".block-preview hr").hide(),t("#edit-block-divider").click((function(){1==t(this).prop("checked")?t(".block-preview hr").show():t(".block-preview hr").hide()})),t("#edit-block-divider-color").change((function(){t(".block-preview hr").css("background-color",a(t(this).val()))})),t("#edit-block-divider-color-custom").bind("keyup change",(function(){t(".block-preview hr").css("background-color",t(this).val())})),t("#edit-block-divider-thickness").change((function(){t(".block-preview hr").css("height","".concat(t(this).bootstrapSlider("getValue"),"px"))})),t("#edit-block-divider-length").change((function(){t(this).bootstrapSlider("getValue")>0?t(".block-preview hr").css("width","".concat(t(this).bootstrapSlider("getValue"),"px")):t(".block-preview hr").css("width","100%")})),t("#edit-block-divider-spacing").change((function(){t(".block-preview hr").css("margin-top","".concat(t(this).bootstrapSlider("getValue"),"px")),t(".block-preview hr").css("margin-bottom","".concat(t(this).bootstrapSlider("getValue"),"px"))})),t(".js-form-type-textfield").each((function(){var e=t(this).find(".slider-horizontal,.form-text").not(".dxpr_themeProcessed");if(e.length>=2)for(var o=0;o<e.length;o+=2)e.slice(o,o+2).wrapAll("<div class='slider-input-wrapper'></div>").addClass("dxpr_themeProcessed")}))}}}(jQuery,Drupal);