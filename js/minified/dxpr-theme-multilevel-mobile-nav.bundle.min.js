!function(){var t={730:function(t){var e={animations:!0},n="animationend";t.exports={onEndAnimation:function(t,i){var r=function(t){if(e.animations){if(t.target!==this)return;this.removeEventListener(n,r)}i&&"function"==typeof i&&i.call()};e.animations?t.addEventListener(n,r):r()},support:e,animEndEventName:n}},844:function(t){t.exports={extend:function(t,e){return Object.keys(e).forEach((function(n){Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})),t}}}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,n),s.exports}var i=n(844).extend,r=n(730).onEndAnimation;!function(t){"use strict";function e(t,e){this.el=t,this.options=i({},this.options),i(this.options,e),this.menus=[].slice.call(this.el.querySelectorAll(".menu__level")),this.current=0,this._init()}Modernizr.cssanimations,e.prototype.options={breadcrumbsCtrl:!0,initialBreadcrumb:"all",backCtrl:!0,itemsDelayInterval:60,direction:"r2l",onItemClick:function(t,e){return!1}},e.prototype._init=function(){this.menusArr=[];var t=this;this.menus.forEach((function(e,n){var i={menuEl:e,menuItems:[].slice.call(e.children)};t.menusArr.push(i),n===t.current&&classie.add(e,"menu__level--current")})),this.options.backCtrl&&(this.backCtrl=document.createElement("button"),this.backCtrl.className="menu__back menu__back--hidden",this.backCtrl.setAttribute("aria-label","Go back"),this.backCtrl.innerHTML='<span class="icon icon--arrow-left"></span>',this.el.insertBefore(this.backCtrl,this.el.firstChild)),t.options.breadcrumbsCtrl&&(this.breadcrumbsCtrl=document.createElement("nav"),this.breadcrumbsCtrl.className="menu__breadcrumbs",this.el.insertBefore(this.breadcrumbsCtrl,this.el.firstChild),this._addBreadcrumb(0)),this._initEvents()},e.prototype._initEvents=function(){for(var t=this,e=0,n=this.menusArr.length;e<n;++e)this.menusArr[e].menuItems.forEach((function(e,n){e.querySelector("a")&&e.querySelector("a").addEventListener("click",(function(e){var i=e.target.getAttribute("data-submenu"),r=e.target.innerHTML,s=t.el.querySelector('ul[data-menu="'.concat(i,'"]'));i&&s?(e.preventDefault(),t._openSubMenu(s,n,r)):(t.el.querySelector(".menu__link--current")&&classie.remove(t.el.querySelector(".menu__link--current"),"menu__link--current"),classie.add(e.target,"menu__link--current"),t.options.onItemClick(e,r))}))}));this.options.backCtrl&&this.backCtrl.addEventListener("click",(function(){t._back()}))},e.prototype._openSubMenu=function(t,e,n){if(this.isAnimating)return!1;this.isAnimating=!0,this.menusArr[this.menus.indexOf(t)].backIdx=this.current,this.menusArr[this.menus.indexOf(t)].name=n,this._menuOut(e),this._menuIn(t,e)},e.prototype._back=function(){if(this.isAnimating)return!1;this.isAnimating=!0,this._menuOut();var t=this.menusArr[this.menusArr[this.current].backIdx].menuEl;this._menuIn(t),this.options.breadcrumbsCtrl&&this.breadcrumbsCtrl.removeChild(this.breadcrumbsCtrl.lastElementChild)},e.prototype._menuOut=function(t){var e=this,n=this.menusArr[this.current].menuEl,i=void 0===t;this.menusArr[this.current].menuItems.forEach((function(n,r){var s="".concat(i?parseInt(r*e.options.itemsDelayInterval,10):parseInt(Math.abs(t-r)*e.options.itemsDelayInterval,10),"ms");n.style.WebkitAnimationDelay=s,n.style.animationDelay=s})),"r2l"===this.options.direction?classie.add(n,i?"animate-outToRight":"animate-outToLeft"):classie.add(n,i?"animate-outToLeft":"animate-outToRight")},e.prototype._menuIn=function(t,e){var n=this,i=this.menusArr[this.current].menuEl,s=void 0===e,a=this.menus.indexOf(t),o=this.menusArr[a].menuItems,u=o.length;o.forEach((function(o,c){var m="".concat(s?parseInt(c*n.options.itemsDelayInterval,10):parseInt(Math.abs(e-c)*n.options.itemsDelayInterval,10),"ms");o.style.WebkitAnimationDelay=m,o.style.animationDelay=m,c===(e<=u/2||s?u-1:0)&&r(o,(function(){"r2l"===n.options.direction?(classie.remove(i,s?"animate-outToRight":"animate-outToLeft"),classie.remove(t,s?"animate-inFromLeft":"animate-inFromRight")):(classie.remove(i,s?"animate-outToLeft":"animate-outToRight"),classie.remove(t,s?"animate-inFromRight":"animate-inFromLeft")),classie.remove(i,"menu__level--current"),classie.add(t,"menu__level--current"),n.current=a,s?0===n.current&&n.options.backCtrl&&classie.add(n.backCtrl,"menu__back--hidden"):(n.options.backCtrl&&classie.remove(n.backCtrl,"menu__back--hidden"),n._addBreadcrumb(a)),n.isAnimating=!1}))})),"r2l"===this.options.direction?classie.add(t,s?"animate-inFromLeft":"animate-inFromRight"):classie.add(t,s?"animate-inFromRight":"animate-inFromLeft")},e.prototype._addBreadcrumb=function(t){if(!this.options.breadcrumbsCtrl)return!1;var e=document.createElement("a");e.innerHTML=t?this.menusArr[t].name:this.options.initialBreadcrumb,this.breadcrumbsCtrl.appendChild(e);var n=this;e.addEventListener("click",(function(i){if(i.preventDefault(),!e.nextSibling||n.isAnimating)return!1;n.isAnimating=!0,n._menuOut();var r=n.menusArr[t].menuEl;n._menuIn(r);for(var s=e.nextSibling;s;)n.breadcrumbsCtrl.removeChild(s),s=e.nextSibling}))},t.MLMenu=e}(window)}();