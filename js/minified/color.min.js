!function(e){Drupal.behaviors.color={attach:function(t,i){var o,n,s,l=e("#system-theme-settings .color-form",t).once("color");if(0!=l.length){var a=[],c=null;e(l).prepend('<div id="placeholder"></div>').addClass("color-processed");var r=e.farbtastic("#placeholder"),u=i.color.reference;for(o in u)u[o]=r.RGBToHSL(r.unpack(u[o]));e("#edit-scheme",l).change((function(){var t=i.color.schemes,o=this.options[this.selectedIndex].value;if(""!=o&&t[o])for(s in n=t[o])d(e("#edit-palette-"+s),n[s],!1,!0)})),e("#palette input.form-text",l).each((function(){this.key=this.id.substring(13),r.linkTo((function(){})).setColor("#000").linkTo(this),this.i=o,a.push(this)})).focus(h),e("#palette label",l),h.call(a[0])}function d(t,i,o,n){e(t).css({backgroundColor:i,color:r.RGBToHSL(r.unpack(i))[2]>.5?"#000":"#fff"}),e(t).val()&&e(t).val()!=i&&(e(t).val(i),n||p())}function p(){e("#edit-scheme",l).each((function(){this.selectedIndex=this.options.length-1}))}function h(){var t=this;c&&e(c).unbind("keyup",r.updateValue).unbind("keyup",preview).unbind("keyup",p).parent().removeClass("item-selected"),c=this,r.linkTo((function(e){d(t,e,0,!1)})),r.setColor(this.value),e(c).keyup(r.updateValue).keyup(preview).keyup(p).parent().addClass("item-selected")}}}}(jQuery);